<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hex Grid Mind Map</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body { margin: 0; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
  console.log("Script loaded");
  let hexRadius = 60;
  let hexData = [];let draggingHex = null;
  let centerX, centerY;

let url = "https://script.google.com/macros/s/AKfycby94JzUkhIgkKBlb98jWhStU8yh8fZeoGwQPgX3vrUeW54iwWaoqxuoYsDT6yRKkWjQ/exec";

function preload() {
  loadJSON(url, res => {
    hexData = res.items.map(h => {
      let x = centerX + h.col * 1.5 * hexRadius;
      let y = centerY + h.row * sqrt(3) * hexRadius + (h.col % 2 !== 0 ? sqrt(3)/2 * hexRadius : 0);
      return { ...h, x, y };
    });
    redraw();
  });
}

function setup() {
  createCanvas(windowWidth, windowHeight);
  centerX = width / 2;
  centerY = height / 2;
  textAlign(CENTER, CENTER);
  textSize(14);
  noLoop();
}

function draw() {
  background(255);
  for (let h of hexData) {
    drawHex(h);
  }
}

function drawHex(h) {
  fill(h.color || "#FFFFFF");
  stroke(0);
  beginShape();
  for (let i = 0; i < 6; i++) {
    let angle = PI / 3 * i;
    vertex(h.x + cos(angle) * hexRadius, h.y + sin(angle) * hexRadius);
  }
  endShape(CLOSE);
  fill(0);
  noStroke();
  text(h.label, h.x, h.y);
}

function mousePressed() {
  for (let h of hexData) {
    i
